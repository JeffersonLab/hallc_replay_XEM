#********************
# Trigger Apparatus *
#********************

#---------------------------
# HMS Raw Hodo TRIG TDC Time
#---------------------------

TH1F htrig_h1x_tdc 'HMS h1X TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.h1X_tdcTimeRaw 1500 0 1500
TH1F htrig_h1y_tdc 'HMS h1Y TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.h1Y_tdcTimeRaw 1500 0 1500
TH1F htrig_h2x_tdc 'HMS h2X TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.h2X_tdcTimeRaw 1500 0 1500
TH1F htrig_h2y_tdc 'HMS h2Y TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.h2Y_tdcTimeRaw 1500 0 1500

TH1F htrig_h1T_tdc 'HMS h1X/h1Y Coincidence TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.h1T_tdcTimeRaw 1500 0 1500
TH1F htrig_h2T_tdc 'HMS h2X/h2Y Coincidence TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.h2T_tdcTimeRaw 1500 0 1500

TH1F htrig_hT1_tdc 'HMS h1X/h1Y/h2X/h2Y Coincidence TDC Time (Slot 2); Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hT1_tdcTimeRaw 1500 0 1500
TH1F htrig_hT2_tdc 'HMS h1X/h1Y/h2X/h2Y Coincidence TDC Time (Slot 20); Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hT2_tdcTimeRaw 1500 0 1500

#----------------------------
# HMS Raw DC Reference Time
#----------------------------

TH1F htrig_hdc_ref1 'HMS DC Reference Time 1; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hDCREF1_tdcTimeRaw 15000 0 15000
TH1F htrig_hdc_ref2 'HMS DC Reference Time 2; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hDCREF2_tdcTimeRaw 15000 0 15000
TH1F htrig_hdc_ref3 'HMS DC Reference Time 3; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hDCREF3_tdcTimeRaw 15000 0 15000
TH1F htrig_hdc_ref4 'HMS DC Reference Time 4; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hDCREF4_tdcTimeRaw 15000 0 15000


TH1F hdc_refdiff_1m2 'HDC Reference time 1 minus 2; TDC Time (Clicks); Number of Entries / 1 click' T.hms.hDCREF1_tdcTime-T.hms.hDCREF2_tdcTime 2000 -1000 1000
TH1F hdc_refdiff_1m3 'HDC Reference time 1 minus 3; TDC Time (Clicks); Number of Entries / 1 click' T.hms.hDCREF1_tdcTime-T.hms.hDCREF3_tdcTime 2000 -1000 1000
TH1F hdc_refdiff_1m4 'HDC Reference time 1 minus 4; TDC Time (Clicks); Number of Entries / 1 click' T.hms.hDCREF1_tdcTime-T.hms.hDCREF4_tdcTime 2000 -1000 1000

TH1F hdc_refdiff_2m3 'HDC Reference time 2 minus 3; TDC Time (Clicks); Number of Entries / 1 click' T.hms.hDCREF2_tdcTime-T.hms.hDCREF3_tdcTime 2000 -1000 1000
TH1F hdc_refdiff_2m4 'HDC Reference time 2 minus 4; TDC Time (Clicks); Number of Entries / 1 click' T.hms.hDCREF2_tdcTime-T.hms.hDCREF4_tdcTime 2000 -1000 1000
TH1F hdc_refdiff_3m4 'HDC Reference time 3 minus 4; TDC Time (Clicks); Number of Entries / 1 click' T.hms.hDCREF3_tdcTime-T.hms.hDCREF4_tdcTime 2000 -1000 1000


#--------------------------------------------
# HMS Calo Layers TRIG Pulse Profile
#--------------------------------------------

TH1F htrig_hasum_adc_pped 'HMS hAsum Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hASUM_adcPed 5000 0 5000
TH1F htrig_hasum_adc_pi 'HMS hAsum Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hASUM_adcPulseInt 800 0 40000
TH1F htrig_hasum_adc_pamp 'HMS hAsum Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hASUM_adcPulseAmp 205 0 4100
TH1F htrig_hasum_tdc 'HMS hAsum TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hASUM_tdcTime 4000 0 40000

TH1F htrig_hbsum_adc_pped 'HMS hBsum Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hBSUM_adcPed 5000 0 5000
TH1F htrig_hbsum_adc_pi 'HMS hBsum Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hBSUM_adcPulseInt 800 0 40000
TH1F htrig_hbsum_adc_pamp 'HMS hBsum Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hBSUM_adcPulseAmp 205 0 4100
TH1F htrig_hbsum_tdc 'HMS hBsum TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hBSUM_tdcTime 4000 0 40000

TH1F htrig_hcsum_adc_pped 'HMS hCsum Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hCSUM_adcPed 5000 0 5000
TH1F htrig_hcsum_adc_pi 'HMS hCsum Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hCSUM_adcPulseInt 800 0 40000
TH1F htrig_hcsum_adc_pamp 'HMS hCsum Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hCSUM_adcPulseAmp 205 0 4100
TH1F htrig_hcsum_tdc 'HMS hCsum TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hCSUM_tdcTime 4000 0 40000

TH1F htrig_hdsum_adc_pped 'HMS hDsum Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hDSUM_adcPed 5000 0 5000
TH1F htrig_hdsum_adc_pi 'HMS hDsum Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hDSUM_adcPulseInt 800 0 40000
TH1F htrig_hdsum_adc_pamp 'HMS hDsum Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hDSUM_adcPulseAmp 205 0 4100
TH1F htrig_hdsum_tdc 'HMS hDsum TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hDSUM_tdcTime 4000 0 40000

#----------------------------------
# HMS PreShower TRIG Pulse Profile
#----------------------------------

TH1F htrig_hpreShwr_adc_pped 'HMS Pre-Shower Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hPSHWR_adcPed 5000 0 5000
TH1F htrig_hpreShwr_adc_pi 'HMS Pre-Shower Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hPSHWR_adcPulseInt 800 0 40000
TH1F htrig_hpreShwr_adc_pamp 'HMS Pre-Shower Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hPSHWR_adcPulseAmp 205 0 4100
TH1F htrig_hpreShwr_tdc 'HMS Pre-Shower TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hPSHWR_tdcTime 4000 0 40000

#-----------------------------
# HMS PreShower TRIG LOW/HIGH  
#-----------------------------

TH1F htrig_hpreShwrLow_tdc 'HMS hpreShwrLow TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hPSHWRLO_tdcTimeRaw 4000 0 40000
TH1F htrig_hpreShwrHigh_tdc 'HMS hpreShwrHigh TDC Time; Raw TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hPSHWRHI_tdcTimeRaw 4000 0 40000


#----------------------------------
# HMS Shower TRIG Pulse Profile
#----------------------------------

TH1F htrig_hshwr_adc_pped 'HMS Shower Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hSHWR_adcPed 5000 0 5000
TH1F htrig_hshwr_adc_pi 'HMS Shower Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hSHWR_adcPulseInt 800 0 40000
TH1F htrig_hshwr_adc_pamp 'HMS Shower Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hSHWR_adcPulseAmp 205 0 4100
TH1F htrig_hshwr_tdc 'HMS Shower TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hSHWR_tdcTime 4000 0 40000

#---------------------------------------
# HMS Gas Cherenkov TRIG Pulse Profile
#---------------------------------------

TH1F htrig_hcersum_adc_pped 'HMS Cherenkov Sum Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hCERSUM_adcPed 5000 0 5000
TH1F htrig_hcersum_adc_pi 'HMS Cherenkov Sum Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hCERSUM_adcPulseInt 800 0 40000
TH1F htrig_hcersum_adc_pamp 'HMS Cherenkov Sum Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hCERSUM_adcPulseAmp 205 0 4100
TH1F htrig_hcersum_tdc 'HMS Cherenkov Sum TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hCERSUM_tdcTime 4000 0 40000


#------------------------------------------
# HMS Aerogel TRIG Pulse Profile
#------------------------------------------

TH1F htrig_haersum_adc_pped 'HMS Aerogel Sum Pulse Pedestal;  Pulse Pedestal (ADC Units); Counts / 1 ADC Units;' T.hms.hAERSUM_adcPed 5000 0 5000
TH1F htrig_haersum_adc_pi 'HMS Aerogel Sum Pulse Integral;  Pulse Integral (ADC Units); Counts / 50 ADC Units;' T.hms.hAERSUM_adcPulseInt 800 0 40000
TH1F htrig_haersum_adc_pamp 'HMS Aerogel Sum Pulse Amplitude;  Pulse Amplitude (ADC Units); Counts / 20 ADC Units;' T.hms.hAERSUM_adcPulseAmp 205 0 4100
TH1F htrig_haersum_tdc 'HMS Aerogel Sum TDC Time;  TDC Time (TDC Units); Counts / 10 TDC Units;' T.hms.hAERSUM_tdcTime 4000 0 40000


#-------------
# Fast Raster 
#-------------

# Assume FADC range is set to 1V and the integration is 25 channels
# Offset in the FADC is about 0.122V or 500 channels.

formula FRXA_V T.hms.pFRXA_adcPulseIntRaw*(1./4096.)/25.
formula FRXB_V T.hms.pFRXB_adcPulseIntRaw*(1./4096.)/25.
formula FRYA_V T.hms.pFRYA_adcPulseIntRaw*(1./4096.)/25.
formula FRYB_V T.hms.pFRYB_adcPulseIntRaw*(1./4096.)/25.

TH1F hFRXA 'HMS FRXA; FRXA RAW ADC (chan); Counts' T.hms.pFRXA_adcPulseIntRaw 1000 0 100000
TH1F hFRXA_V 'HMS FRXA; FRXA RAW ADC (Volts); Counts' FRXA_V 1000 0 1.0
TH1F hFRXB 'HMS FRXB; FRXB RAW ADC (chan); Counts' T.hms.pFRXB_adcPulseIntRaw 1000 0 100000
TH1F hFRXB_V 'HMS FRXB; FRXB RAW ADC (Volts); Counts' FRXB_V 1000 0 1.0
TH1F hFRYA 'HMS FRYA; FRYA RAW ADC (chan); Counts' T.hms.pFRYA_adcPulseIntRaw 1000 0 100000
TH1F hFRYA_V 'HMS FRYA; FRYA RAW ADC (Volts); Counts' FRYA_V 1000 0 1.0
TH1F hFRYB 'HMS FRYB; FRYB RAW ADC (chan); Counts' T.hms.pFRYB_adcPulseIntRaw 1000 0 100000
TH1F hFRYB_V 'HMS FRYB; FRYB RAW ADC (Volts); Counts' FRYB_V 1000 0 1.0
TH2F hFRA_XvsY 'HMSFRA_XvsY; FRXA RAW ADC (Volts); FRYA RAW ADC (Volts)' FRXA_V FRYA_V 1000 0 1.0 1000 0 1.0
TH2F hFRB_XvsY 'HMSFRB_XvsY; FRXB RAW ADC (Volts); FRYB RAW ADC (Volts)' FRXB_V FRYB_V 1000 0 1.0 1000 0 1.0

